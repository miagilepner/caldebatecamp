(function(e){"use strict";redux.field_objects=redux.field_objects||{};redux.field_objects.layer_slides=redux.field_objects.layer_slides||{};e(document).ready(function(){});redux.field_objects.layer_slides.init=function(t){if(!t){t=e(document).find(".redux-group-tab:visible").find(".redux-container-layer_slides:visible")}e(t).each(function(){var t=e(this);redux.field_objects.media.init(t);var n=t;if(!t.hasClass("redux-field-container")){n=t.parents(".redux-field-container:first")}if(n.is(":hidden")){return}if(n.hasClass("redux-container-layer_slides")){n.addClass("redux-field-init")}if(n.hasClass("redux-field-init")){n.removeClass("redux-field-init")}else{return}t.find(".redux-slides-remove").live("click",function(){redux_change(e(this));e(this).parent().siblings().find('input[type="text"]').val("");e(this).parent().siblings().find("textarea").val("");e(this).parent().siblings().find('input[type="hidden"]').val("");var t=e(this).parents(".redux-container-layer_slides:first").find(".redux-slides-accordion-group").length;if(t>1){e(this).parents(".redux-slides-accordion-group:first").slideUp("medium",function(){e(this).remove()})}else{var n=e(this).parent(".redux-slides-accordion").data("new-content-title");e(this).parents(".redux-slides-accordion-group:first").find(".remove-image").click();e(this).parents(".redux-container-layer_slides:first").find(".redux-slides-accordion-group:last").find(".redux-slides-header").text(n)}});t.find(".redux-slides-add").click(function(){var t=e(this).prev().find(".redux-slides-accordion-group:last").clone(true);var n=e(t).find(".slide-title").attr("name").match(/[0-9]+(?!.*[0-9])/);var r=n*1+1;e(t).find('input[type="text"], input[type="hidden"], textarea').each(function(){e(this).attr("name",jQuery(this).attr("name").replace(/[0-9]+(?!.*[0-9])/,r)).attr("id",e(this).attr("id").replace(/[0-9]+(?!.*[0-9])/,r));e(this).val("");if(e(this).hasClass("slide-sort")){e(this).val(r)}});var i=e(this).prev().data("new-content-title");e(t).find(".screenshot").removeAttr("style");e(t).find(".screenshot").addClass("hide");e(t).find(".screenshot a").attr("href","");e(t).find(".remove-image").addClass("hide");e(t).find(".redux-slides-image").attr("src","").removeAttr("id");e(t).find("h3").text("").append('<span class="redux-slides-header">'+i+'</span><span class="ui-accordion-header-icon ui-icon ui-icon-plus"></span>');e(this).prev().append(t)});t.find(".slide-title").keyup(function(t){var n=t.target.value;e(this).parents().eq(3).find(".redux-slides-header").text(n)});t.find(".redux-slides-accordion").accordion({header:"> div > fieldset > h3",collapsible:true,active:false,heightStyle:"content",icons:{header:"ui-icon-plus",activeHeader:"ui-icon-minus"}}).sortable({axis:"y",handle:"h3",connectWith:".redux-slides-accordion",start:function(e,t){t.placeholder.height(t.item.height());t.placeholder.width(t.item.width())},placeholder:"ui-state-highlight",stop:function(t,n){n.item.children("h3").triggerHandler("focusout");var r=e("input.slide-sort");r.each(function(t){e(this).val(t)})}})})}})(jQuery);